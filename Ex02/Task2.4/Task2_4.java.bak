import java.util.*;

// Class to search for Armstrong numbers in a number range
class ArmstrongSearcher implements Runnable{

	// Start of number range (inclusive)
	int rangeStart;
	// End of number range (exclusive)
	int rangeEnd;

	public ArmstrongSearcher(int rangeStart, int rangeEnd){
		this.rangeStart = rangeStart;
		this.rangeEnd = rangeEnd;
	}

	// Get the digits of a given number as a list of integers
	private LinkedList<Integer> getDigits(int number){
		LinkedList<Integer> digits = new LinkedList<Integer>();

		while(number > 0){
			// Extract last digit
			digits.add(number % 10);
			// Remove last digit from number
			number = number / 10;
		}

		return digits;
	}

	public void run(){
		// Loop over all numbers in the range
		for(int currentNumber = rangeStart; currentNumber < rangeEnd; currentNumber++){
		
			LinkedList<Integer> digits = getDigits(currentNumber);
			int m = digits.size();
			
			int armstrongNumber = 0;
			// Calculate potential armstrong number
			for(int digit : digits){
				armstrongNumber += Math.pow(digit, m);
			}

			// If the number is indeed a Armstrong number, print it
			if(armstrongNumber == currentNumber){
				System.out.println(currentNumber);
			}
		}
	}
}

class Task2_4{
	public static void main(String[] args){

		// Check number of arguments
		if(args.length < 2){
			System.out.println("Missing arguments.");
			return;
		}

		int min = 10;
		int max;
		int P;

		try{
			// Get the maximum number and the number of threads from the arguments
			max = Integer.parseInt(args[0]) + 1;
			P = Integer.parseInt(args[1]);
		} catch(NumberFormatException e){
			System.out.println("Invalid input:");
			System.out.println(e);
			return;
		}
	
		// Calculate the chunk size each thread should process
		// Round up in case the result is not an integer
		int chunkSize = (int)Math.ceil((double)(max - min) / P);

		for(int i = 0; i < P ; i++){
			// Calculate the start and end of each chunk
			int start = i * chunkSize + min;
			int end = (i + 1) * chunkSize + min;

			// Because the chunk size was rounded up,
			// make sure the end is not larger than the maximum number to be checked
			end = Math.min(end, max);

			// Search for Armstrong numbers
			Thread t = new Thread(new ArmstrongSearcher(start, end));
			t.start();
		}
	}
}
